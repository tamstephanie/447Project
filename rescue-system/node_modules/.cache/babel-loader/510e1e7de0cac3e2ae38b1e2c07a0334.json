{"remainingRequest":"/mnt/c/Users/Flower/Documents/Steph/447Project/rescue-system/node_modules/babel-loader/lib/index.js!/mnt/c/Users/Flower/Documents/Steph/447Project/rescue-system/node_modules/eslint-loader/index.js??ref--13-0!/mnt/c/Users/Flower/Documents/Steph/447Project/rescue-system/src/helpers/user.service.js","dependencies":[{"path":"/mnt/c/Users/Flower/Documents/Steph/447Project/rescue-system/src/helpers/user.service.js","mtime":1544582048192},{"path":"/mnt/c/Users/Flower/Documents/Steph/447Project/rescue-system/node_modules/cache-loader/dist/cjs.js","mtime":1543684926695},{"path":"/mnt/c/Users/Flower/Documents/Steph/447Project/rescue-system/node_modules/babel-loader/lib/index.js","mtime":1543685022971},{"path":"/mnt/c/Users/Flower/Documents/Steph/447Project/rescue-system/node_modules/eslint-loader/index.js","mtime":1543685038734}],"contextDependencies":[],"result":["import { authHeader } from './helpers';\nexport var userService = {\n  login: login,\n  logout: logout,\n  getAll: getAll\n};\n\nfunction login(username, password) {\n  var requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username: username,\n      password: password\n    })\n  };\n  return fetch(\"\".concat(config.apiURL, \"/users/authenticate\"), requestOptions).then(handleResponse).then(function (user) {\n    if (user.token) {\n      localStorage.setItem('user', JSON.stringify(user));\n    }\n\n    return user;\n  });\n}\n\nfunction logout() {\n  localStorage.removeItem('user');\n}\n\nfunction getAll() {\n  var requestOptions = {\n    method: 'GET',\n    headers: authHeader()\n  };\n  return fetch(\"\".concat(config.apiUrl, \"/users\"), requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n  return response.text().then(function (text) {\n    var data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      if (response.status === 401) {\n        logout();\n        location.reload(true);\n      }\n\n      var error = data && data.message || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}",{"version":3,"sources":["/mnt/c/Users/Flower/Documents/Steph/447Project/rescue-system/src/helpers/user.service.js"],"names":["authHeader","userService","login","logout","getAll","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","config","apiURL","then","handleResponse","user","token","localStorage","setItem","removeItem","apiUrl","response","text","data","parse","ok","status","location","reload","error","message","statusText","Promise","reject"],"mappings":"AAAA,SAASA,UAAT,QAA2B,WAA3B;AAEA,OAAO,IAAMC,WAAW,GAAG;AACzBC,EAAAA,KAAK,EAALA,KADyB;AAEzBC,EAAAA,MAAM,EAANA,MAFyB;AAGzBC,EAAAA,MAAM,EAANA;AAHyB,CAApB;;AAMP,SAASF,KAAT,CAAgBG,QAAhB,EAA0BC,QAA1B,EAAoC;AAClC,MAAMC,cAAc,GAAG;AACrBC,IAAAA,MAAM,EAAE,MADa;AAErBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFY;AAGrBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACP,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAf;AAHe,GAAvB;AAMA,SAAOO,KAAK,WAAIC,MAAM,CAACC,MAAX,0BAAwCR,cAAxC,CAAL,CACJS,IADI,CACCC,cADD,EAEJD,IAFI,CAEC,UAAAE,IAAI,EAAI;AACZ,QAAGA,IAAI,CAACC,KAAR,EAAe;AACbC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BV,IAAI,CAACC,SAAL,CAAeM,IAAf,CAA7B;AACD;;AAED,WAAOA,IAAP;AACD,GARI,CAAP;AASD;;AAED,SAASf,MAAT,GAAkB;AAChBiB,EAAAA,YAAY,CAACE,UAAb,CAAwB,MAAxB;AACD;;AAED,SAASlB,MAAT,GAAkB;AAChB,MAAMG,cAAc,GAAG;AACrBC,IAAAA,MAAM,EAAE,KADa;AAErBC,IAAAA,OAAO,EAAET,UAAU;AAFE,GAAvB;AAKA,SAAOa,KAAK,WAAIC,MAAM,CAACS,MAAX,aAA2BhB,cAA3B,CAAL,CAAgDS,IAAhD,CAAqDC,cAArD,CAAP;AACD;;AAED,SAASA,cAAT,CAAwBO,QAAxB,EAAkC;AAChC,SAAOA,QAAQ,CAACC,IAAT,GAAgBT,IAAhB,CAAqB,UAAAS,IAAI,EAAI;AAClC,QAAMC,IAAI,GAAGD,IAAI,IAAId,IAAI,CAACgB,KAAL,CAAWF,IAAX,CAArB;;AACA,QAAG,CAACD,QAAQ,CAACI,EAAb,EAAiB;AACf,UAAGJ,QAAQ,CAACK,MAAT,KAAoB,GAAvB,EAA4B;AAC1B1B,QAAAA,MAAM;AACN2B,QAAAA,QAAQ,CAACC,MAAT,CAAgB,IAAhB;AACD;;AAED,UAAMC,KAAK,GAAIN,IAAI,IAAIA,IAAI,CAACO,OAAd,IAA0BT,QAAQ,CAACU,UAAjD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD;;AAED,WAAON,IAAP;AACD,GAbM,CAAP;AAcD","sourcesContent":["import { authHeader } from './helpers'\r\n\r\nexport const userService = {\r\n  login,\r\n  logout,\r\n  getAll\r\n};\r\n\r\nfunction login (username, password) {\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({username, password})\r\n  };\r\n\r\n  return fetch(`${config.apiURL}/users/authenticate`, requestOptions)\r\n    .then(handleResponse)\r\n    .then(user => {\r\n      if(user.token) {\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n      }\r\n\r\n      return user;\r\n    });\r\n}\r\n\r\nfunction logout() {\r\n  localStorage.removeItem('user');\r\n}\r\n\r\nfunction getAll() {\r\n  const requestOptions = {\r\n    method: 'GET',\r\n    headers: authHeader()\r\n  };\r\n\r\n  return fetch(`${config.apiUrl}/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n  return response.text().then(text => {\r\n    const data = text && JSON.parse(text);\r\n    if(!response.ok) {\r\n      if(response.status === 401) {\r\n        logout();\r\n        location.reload(true);\r\n      }\r\n\r\n      const error = (data && data.message) || response.statusText;\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    return data;\r\n  });\r\n}"]}]}